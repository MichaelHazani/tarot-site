reader.controller("sidebar",["$scope","$log","tarotDeck",function(e,t,o){e.deck=o.deck,e.deck.activeCard=o.deck.activeCard,this.focusOn=function(t){e.deck.activeCard=t},this.filtercard=""}]),reader.controller("cardsingle",["$scope","$log","$sanitize","$sce","tarotDeck",function(e,t,o,i,n){e.deck=n.deck}]),reader.controller("cardindex",["$scope","$log","tarotDeck",function(e,t,o){e.deck=o.deck,e.deck.activeCard=o.deck.activeCard,this.focusOn=function(t){e.deck.activeCard=t}}]),reader.controller("home",["$scope","tarotDeck",function(e,t){e.deck=t.deck}]),reader.controller("spreads",["$scope","$log","$sanitize","$sce","tarotDeck",function(e,t,o,i,n){e.deck=n.deck}]),reader.controller("three-card",["$scope","$log","$window","tarotDeck",function(e,t,o,i){e.deck=i.deck;var n,r,a,s,c,d,p=[],l=o.innerWidth/2,h=o.innerHeight/2,u=new THREE.Raycaster,E,m=new THREE.Vector2,y=[-30,0,30],f=new TimelineLite;e.init=function(){var e=i.shuffledDeck();r=new THREE.WebGLRenderer({antialias:!0,autoClear:!0}),r.setClearColor(16777215),r.setSize(o.innerWidth/12*8,o.innerHeight/12*8),$("#container-three-card").append(r.domElement),a=new THREE.Scene,n=new THREE.PerspectiveCamera(35,o.innerWidth/o.innerHeight,1,1e4),n.position.set(0,0,75),a.add(n);var t=new THREE.AmbientLight(16777215);t.position.set(0,0,20),a.add(t);for(var s=new THREE.BoxGeometry(14,24,.2),c=[],d=(new THREE.TextureLoader).load(e[0].image),p=new THREE.MeshBasicMaterial({map:d}),l=0;3>l;l++){var h=(new THREE.TextureLoader).load(e[l].image),u=new THREE.MeshBasicMaterial({map:h}),E=[];E.push(p),E.push(p),E.push(u);var m=THREE.MeshFaceMaterial(E),y=new THREE.Mesh(s,u);y.position.set(-30,10,50),y.rotation.y=Math.PI/2,y.name=e[l].name,y.selected=!1,y.origPos=[30*l-30,0,0],c.push(y),a.add(y)}f.to(c[0].position,1,{x:-30,y:0,z:0}).to(c[0].rotation,1,{y:Math.PI},"-=1").to(c[1].position,1,{x:0,y:0,z:0}).to(c[1].rotation,1,{y:Math.PI},"-=1").to(c[2].position,1,{x:30,y:0,z:0}).to(c[2].rotation,1,{y:Math.PI},"-=1")},$(o).resize(function(){n.aspect=o.innerWidth/o.innerHeight,n.updateProjectionMatrix(),r.setSize(o.innerWidth/12*8,o.innerHeight/12*8)}),e.setFromCamera=function(e,t,o){e.ray.origin.copy(n.position),e.ray.direction.set(t.x,t.y,.5).unproject(n).sub(n.position).normalize()},e.cardClick=function(e){var t;console.log(e),e.object.selected?(f.to(e.object.position,1,{z:e.object.position.z-30}),f.to(e.object.position,1,{x:e.object.origPos[0]},"-=1")):(f.to(e.object.position,1,{z:e.object.position.z+30}),f.to(e.object.position,1,{x:-20},"-=1")),e.object.selected=!e.object.selected},e.mouseMove=function(e){m.x=e.offsetX/r.domElement.width*2-1,m.y=2*-(e.offsetY/r.domElement.height)+1},e.mouseClick=function(){e.setFromCamera(u,m,n);var t=u.intersectObjects(a.children);t.length>0&&e.cardClick(t[0])},e.render=function(){n.position.x=20*m.x,n.position.y=20*m.y,n.lookAt(a.position),requestAnimationFrame(e.render),r.render(a,n)},e.init(),e.render(),e.$on("$destroy",function(){cancelAnimationFrame(this),a=null,n=null,r=null})}]),reader.controller("celtic-cross",["$scope","$log","$window","tarotDeck",function(e,t,o,i){e.deck=i.deck;var n,r,a,s,c=[],d=o.innerWidth/2,p=o.innerHeight/2,l=new THREE.Raycaster,h,u=new THREE.Vector2,E=[-30,0,30],m=new TimelineLite;e.init=function(){s=i.shuffledDeck(),s[0].position={x:-20,y:0,z:0},s[1].position={x:-20,y:0,z:.5},s[2].position={x:-20,y:-30,z:0},s[3].position={x:-50,y:0,z:0},s[4].position={x:-20,y:30,z:0},s[5].position={x:10,y:0,z:0},s[6].position={x:50,y:-40,z:0},s[7].position={x:50,y:-15,z:0},s[8].position={x:50,y:10,z:0},s[9].position={x:50,y:35,z:0},r=new THREE.WebGLRenderer({antialias:!0,autoClear:!0}),r.setClearColor(16777215),r.setSize(o.innerWidth/12*8,o.innerHeight/12*8),$("#container-celtic-cross").append(r.domElement),a=new THREE.Scene,n=new THREE.PerspectiveCamera(35,o.innerWidth/o.innerHeight,1,1e4),n.position.set(0,0,175),a.add(n);var e=new THREE.AmbientLight(16777215);e.position.set(0,0,20),a.add(e);for(var t=new THREE.BoxGeometry(14,24,.2),c=[],d=(new THREE.TextureLoader).load(s[0].image),p=new THREE.MeshBasicMaterial({map:d}),l=0;10>l;l++){var h=(new THREE.TextureLoader).load(s[l].image),u=new THREE.MeshBasicMaterial({map:h}),E=[];E.push(p),E.push(p),E.push(u);var y=THREE.MeshFaceMaterial(E),f=new THREE.Mesh(t,u);f.position.set(-100,50,50),f.rotation.y=Math.PI/2,f.name=s[l].name,f.selected=!1,c.push(f),a.add(f)}m.to(c[0].position,1,s[0].position).to(c[0].rotation,1,{y:Math.PI},"-=1").to(c[1].position,1,s[1].position).to(c[1].rotation,1,{x:Math.PI,y:Math.PI,z:Math.PI/2},"-=1").to(c[2].position,1,s[2].position).to(c[2].rotation,1,{y:Math.PI},"-=1").to(c[3].position,1,s[3].position).to(c[3].rotation,1,{y:Math.PI},"-=1").to(c[4].position,1,s[4].position).to(c[4].rotation,1,{y:Math.PI},"-=1").to(c[5].position,1,s[5].position).to(c[5].rotation,1,{y:Math.PI},"-=1").to(c[6].position,1,s[6].position).to(c[6].rotation,1,{y:Math.PI},"-=1").to(c[7].position,1,s[7].position).to(c[7].rotation,1,{y:Math.PI},"-=1").to(c[8].position,1,s[8].position).to(c[8].rotation,1,{y:Math.PI},"-=1").to(c[9].position,1,s[9].position).to(c[9].rotation,1,{y:Math.PI},"-=1")},$(o).resize(function(){n.aspect=o.innerWidth/o.innerHeight,n.updateProjectionMatrix(),r.setSize(o.innerWidth/12*8,o.innerHeight/12*8)}),e.setFromCamera=function(e,t,o){e.ray.origin.copy(n.position),e.ray.direction.set(t.x,t.y,.5).unproject(n).sub(n.position).normalize()},e.cardPick=function(e){if(e.object.selected)for(refCard in s)e.object.name==s[refCard].name&&m.to(e.object.position,1,s[refCard].position);else m.to(e.object.position,1,{x:-25,y:0,z:e.object.position.z+120});e.object.selected=!e.object.selected},e.mouseMove=function(e){u.x=e.offsetX/r.domElement.width*2-1,u.y=2*-(e.offsetY/r.domElement.height)+1},e.mouseClick=function(){e.setFromCamera(l,u,n);var t=l.intersectObjects(a.children);t.length>0&&e.cardPick(t[0])},e.render=function(){n.position.x=20*u.x,n.position.y=20*u.y,n.lookAt(a.position),requestAnimationFrame(e.render),r.render(a,n)},e.init(),e.render(),e.$on("$destroy",function(){cancelAnimationFrame(this),a=null,n=null,r=null})}]);