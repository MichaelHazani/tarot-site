reader.controller("sidebar",["$scope","$log","tarotDeck",function(o,e,t){o.deck=t.deck,o.deck.activeCard=t.deck.activeCard,this.focusOn=function(e){o.deck.activeCard=e},this.filtercard=""}]),reader.controller("cardsingle",["$scope","$log","$sanitize","$sce","tarotDeck",function(o,e,t,i,n){o.deck=n.deck}]),reader.controller("cardindex",["$scope","$log","tarotDeck",function(o,e,t){o.deck=t.deck,o.deck.activeCard=t.deck.activeCard,this.focusOn=function(e){o.deck.activeCard=e}}]),reader.controller("menu",["$scope","$state",function(o,e){}]),reader.controller("home",["$scope","tarotDeck",function(o,e){o.deck=e.deck}]),reader.controller("spreads",["$scope","$log","$sanitize","$sce","tarotDeck",function(o,e,t,i,n){o.deck=n.deck}]),reader.controller("three-card",["$scope","$window","tarotDeck",function(o,e,t){o.deck=t.deck;var i,n,r,a,s,c,d,p,l=[],m=e.innerWidth/2,h=e.innerHeight/2,y=new THREE.Raycaster,f,E=new THREE.Vector2,u=[-30,0,30],H=null,x=new TimelineLite,M=!1;o.init=function(){i=t.shuffledDeck(),i[0].position={x:-30,y:0,z:0},i[1].position={x:0,y:0,z:0},i[2].position={x:30,y:0,z:0},r=new THREE.WebGLRenderer({antialias:!0,autoClear:!0}),r.setClearColor(16777215),r.setSize(e.innerWidth/12*10,e.innerHeight/12*10),$("#container-three-card").append(r.domElement),a=new THREE.Scene,n=new THREE.PerspectiveCamera(35,e.innerWidth/e.innerHeight,1,1e4),n.position.set(0,0,75),a.add(n);var o=new THREE.AmbientLight(16777215);o.position.set(0,0,20),a.add(o);for(var s=new THREE.BoxGeometry(14,24,.2),c=[],d=(new THREE.TextureLoader).load(i[0].image),p=new THREE.MeshBasicMaterial({map:d}),l=0;3>l;l++){var m=(new THREE.TextureLoader).load(i[l].image),h=new THREE.MeshBasicMaterial({map:m}),y=new THREE.Mesh(s,h);y.position.set(-30,10,50),y.rotation.y=Math.PI/2,y.name=i[l].name,y.selected=!1,c.push(y),a.add(y)}x.to(c[0].position,1,i[0].position).to(c[0].rotation,1,{y:Math.PI},"-=1").to(c[1].position,1,i[1].position).to(c[1].rotation,1,{y:Math.PI},"-=1").to(c[2].position,1,i[2].position).to(c[2].rotation,1,{y:Math.PI},"-=1")},$(e).resize(function(){n.aspect=e.innerWidth/e.innerHeight,n.updateProjectionMatrix(),r.setSize(e.innerWidth/12*10,e.innerHeight/12*10)}),o.setFromCamera=function(o,e,t){o.ray.origin.copy(n.position),o.ray.direction.set(e.x,e.y,.5).unproject(n).sub(n.position).normalize()},o.cardClick=function(o){if(!M){var t=new THREE.PlaneGeometry(e.innerWidth/12*10,e.innerHeight/12*10),n=new THREE.MeshLambertMaterial({color:16777215,transparent:!0,opacity:0});p=new THREE.Mesh(t,n),p.name="overlay",p.position.set(0,0,20),a.add(p),M=!M}if(H)if(o.object.name==H.object.name){for(refCard in i)o.object.name==i[refCard].name&&x.to(o.object.position,1,i[refCard].position);x.to(p.material,.3,{opacity:0,onComplete:function(){a.remove(p),M=!M}},"-=1"),H=null}else{for(refCard in i)H.object.name==i[refCard].name&&x.to(H.object.position,1,i[refCard].position);x.to(o.object.position,1,{x:-20,z:o.object.position.z+30},"-=1"),x.to(p.material,.3,{opacity:0,onComplete:function(){a.remove(p),M=!M}},"-=1"),M=!M,H=o}else x.to(o.object.position,1,{x:-20,z:o.object.position.z+30}).to(p.material,.5,{opacity:.7}),H=o},o.mouseMove=function(o){E.x=o.offsetX/r.domElement.width*2-1,E.y=2*-(o.offsetY/r.domElement.height)+1},o.mouseClick=function(){o.setFromCamera(y,E,n);var e=y.intersectObjects(a.children);e.length>0&&o.cardClick(e[0])},o.render=function(){n.position.x=20*E.x,n.position.y=20*E.y,n.lookAt(a.position),requestAnimationFrame(o.render),r.render(a,n)},o.init(),o.render(),o.$on("$destroy",function(){cancelAnimationFrame(this),a=null,n=null,r=null})}]),reader.controller("celtic-cross",["$scope","$log","$window","tarotDeck",function(o,e,t,i){o.deck=i.deck;var n,r,a,s,c=[],d=t.innerWidth/2,p=t.innerHeight/2,l=new THREE.Raycaster,m,h=new THREE.Vector2,y=[-30,0,30],f=new TimelineLite,E=null;o.init=function(){s=i.shuffledDeck(),s[0].position={x:-20,y:0,z:0},s[1].position={x:-20,y:0,z:.5},s[2].position={x:-20,y:-30,z:0},s[3].position={x:-50,y:0,z:0},s[4].position={x:-20,y:30,z:0},s[5].position={x:10,y:0,z:0},s[6].position={x:50,y:-40,z:0},s[7].position={x:50,y:-15,z:0},s[8].position={x:50,y:10,z:0},s[9].position={x:50,y:35,z:0},r=new THREE.WebGLRenderer({antialias:!0,autoClear:!0}),r.setClearColor(16777215),r.setSize(t.innerWidth/12*10,t.innerHeight/12*10),$("#container-celtic-cross").append(r.domElement),a=new THREE.Scene,n=new THREE.PerspectiveCamera(35,t.innerWidth/t.innerHeight,1,1e4),n.position.set(0,0,175),a.add(n);var o=new THREE.AmbientLight(16777215);o.position.set(0,0,20),a.add(o);for(var e=new THREE.BoxGeometry(14,24,.2),c=[],d=(new THREE.TextureLoader).load(s[0].image),p=new THREE.MeshBasicMaterial({map:d}),l=0;10>l;l++){var m=(new THREE.TextureLoader).load(s[l].image),h=new THREE.MeshBasicMaterial({map:m}),y=new THREE.Mesh(e,h);y.position.set(-100,50,50),y.rotation.y=Math.PI/2,y.name=s[l].name,y.selected=!1,c.push(y),a.add(y)}f.to(c[0].position,1,s[0].position).to(c[0].rotation,1,{y:Math.PI},"-=1").to(c[1].position,1,s[1].position).to(c[1].rotation,1,{x:Math.PI,y:Math.PI,z:Math.PI/2},"-=1").to(c[2].position,1,s[2].position).to(c[2].rotation,1,{y:Math.PI},"-=1").to(c[3].position,1,s[3].position).to(c[3].rotation,1,{y:Math.PI},"-=1").to(c[4].position,1,s[4].position).to(c[4].rotation,1,{y:Math.PI},"-=1").to(c[5].position,1,s[5].position).to(c[5].rotation,1,{y:Math.PI},"-=1").to(c[6].position,1,s[6].position).to(c[6].rotation,1,{y:Math.PI},"-=1").to(c[7].position,1,s[7].position).to(c[7].rotation,1,{y:Math.PI},"-=1").to(c[8].position,1,s[8].position).to(c[8].rotation,1,{y:Math.PI},"-=1").to(c[9].position,1,s[9].position).to(c[9].rotation,1,{y:Math.PI},"-=1")},$(t).resize(function(){n.aspect=t.innerWidth/t.innerHeight,n.updateProjectionMatrix(),r.setSize(t.innerWidth/12*10,t.innerHeight/12*10)}),o.setFromCamera=function(o,e,t){o.ray.origin.copy(n.position),o.ray.direction.set(e.x,e.y,.5).unproject(n).sub(n.position).normalize()},o.cardPick=function(o){var e=new THREE.PlaneGeometry(t.innerWidth/12*10,t.innerHeight/12*10),i=new THREE.MeshLambertMaterial({color:16777215,transparent:!0,opacity:0}),n=new THREE.Mesh(e,i);if(n.position.set(0,0,20),a.add(n),console.log(n),E)if(o.object.name==E.object.name){for(refCard in s)o.object.name==s[refCard].name&&(f.to(o.object.position,1,s[refCard].position),o.object.name==s[1].name&&f.to(o.object.rotation,1,{x:Math.PI,y:Math.PI,z:Math.PI/2},"-=1"));E=null}else{for(refCard in s)E.object.name==s[refCard].name&&f.to(E.object.position,1,s[refCard].position);f.to(o.object.position,1,{x:-25,y:0,z:o.object.position.z+120},"-=1"),o.object.name==s[1].name&&f.to(o.object.rotation,1,{x:0,y:0,z:0},"-=1"),E=o}else f.to(o.object.position,1,{x:-25,y:0,z:o.object.position.z+120}),o.object.name==s[1].name&&f.to(o.object.rotation,1,{x:0,y:0,z:0},"-=1"),E=o},o.mouseMove=function(o){h.x=o.offsetX/r.domElement.width*2-1,h.y=2*-(o.offsetY/r.domElement.height)+1},o.mouseClick=function(){o.setFromCamera(l,h,n);var e=l.intersectObjects(a.children);e.length>0&&o.cardPick(e[0])},o.render=function(){n.position.x=20*h.x,n.position.y=20*h.y,n.lookAt(a.position),requestAnimationFrame(o.render),r.render(a,n)},o.init(),o.render(),o.$on("$destroy",function(){cancelAnimationFrame(this),a=null,n=null,r=null})}]),reader.controller("tree-of-life",["$scope","$log","$window","tarotDeck",function(o,e,t,i){o.deck=i.deck;var n,r,a,s,c=[],d=t.innerWidth/2,p=t.innerHeight/2,l=new THREE.Raycaster,m,h=new THREE.Vector2,y=[-30,0,30],f=new TimelineLite,E=null;o.init=function(){s=i.shuffledDeck(),s[0].position={x:0,y:55,z:0},s[1].position={x:25,y:40,z:0},s[2].position={x:-25,y:40,z:0},s[3].position={x:25,y:15,z:0},s[4].position={x:-25,y:15,z:0},s[5].position={x:0,y:5,z:0},s[6].position={x:25,y:-20,z:0},s[7].position={x:-25,y:-20,z:0},s[8].position={x:0,y:-30,z:0},s[9].position={x:0,y:-55,z:0},r=new THREE.WebGLRenderer({antialias:!0,autoClear:!0}),r.setClearColor(16777215),r.setSize(t.innerWidth/12*10,t.innerHeight/12*10),$("#container-tree-of-life").append(r.domElement),a=new THREE.Scene,n=new THREE.PerspectiveCamera(35,t.innerWidth/t.innerHeight,1,1e4),n.position.set(0,0,230),a.add(n);var o=new THREE.AmbientLight(16777215);o.position.set(0,0,20),a.add(o);for(var e=new THREE.BoxGeometry(14,24,.2),c=[],d=(new THREE.TextureLoader).load(s[0].image),p=new THREE.MeshBasicMaterial({map:d}),l=0;10>l;l++){var m=(new THREE.TextureLoader).load(s[l].image),h=new THREE.MeshBasicMaterial({map:m}),y=new THREE.Mesh(e,h);y.position.set(-150,50,50),y.rotation.y=Math.PI/2,y.name=s[l].name,y.selected=!1,c.push(y),a.add(y)}f.to(c[0].position,1,s[0].position).to(c[0].rotation,1,{y:Math.PI},"-=1").to(c[1].position,1,s[1].position).to(c[1].rotation,1,{y:Math.PI},"-=1").to(c[2].position,1,s[2].position).to(c[2].rotation,1,{y:Math.PI},"-=1").to(c[3].position,1,s[3].position).to(c[3].rotation,1,{y:Math.PI},"-=1").to(c[4].position,1,s[4].position).to(c[4].rotation,1,{y:Math.PI},"-=1").to(c[5].position,1,s[5].position).to(c[5].rotation,1,{y:Math.PI},"-=1").to(c[6].position,1,s[6].position).to(c[6].rotation,1,{y:Math.PI},"-=1").to(c[7].position,1,s[7].position).to(c[7].rotation,1,{y:Math.PI},"-=1").to(c[8].position,1,s[8].position).to(c[8].rotation,1,{y:Math.PI},"-=1").to(c[9].position,1,s[9].position).to(c[9].rotation,1,{y:Math.PI},"-=1")},$(t).resize(function(){n.aspect=t.innerWidth/t.innerHeight,n.updateProjectionMatrix(),r.setSize(t.innerWidth/12*10,t.innerHeight/12*10)}),o.setFromCamera=function(o,e,t){o.ray.origin.copy(n.position),o.ray.direction.set(e.x,e.y,.5).unproject(n).sub(n.position).normalize()},o.cardPick=function(o){if(E)if(o.object.name==E.object.name){for(refCard in s)o.object.name==s[refCard].name&&(f.to(o.object.position,1,s[refCard].position),$(".overlay").fadeTo("opacity","0",function(){$(".overlay").hide()}));E=null}else{for(refCard in s)E.object.name==s[refCard].name&&f.to(E.object.position,1,s[refCard].position);f.to(o.object.position,1,{x:-25,y:0,z:o.object.position.z+170},"-=1"),$(".overlay").css("visibility","visible").hide().fadeTo("opacity","0.8"),E=o}else f.to(o.object.position,1,{x:-25,y:0,z:o.object.position.z+170}),$(".overlay").css("visibility","visible").hide().fadeTo("opacity","0.8"),E=o},o.mouseMove=function(o){h.x=o.offsetX/r.domElement.width*2-1,h.y=2*-(o.offsetY/r.domElement.height)+1},o.mouseClick=function(){o.setFromCamera(l,h,n);var e=l.intersectObjects(a.children);e.length>0&&o.cardPick(e[0])},o.render=function(){n.position.x=20*h.x,n.position.y=20*h.y,n.lookAt(a.position),requestAnimationFrame(o.render),r.render(a,n)},o.init(),o.render(),o.$on("$destroy",function(){cancelAnimationFrame(this),a=null,n=null,r=null})}]);